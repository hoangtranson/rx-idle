!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("rx-idle",["exports","rxjs","rxjs/operators","@angular/core"],e):e(t["rx-idle"]={},t.rxjs,t.rxjs.operators,t.ng.core)}(this,function(t,n,r,e){"use strict";function i(){}var o={TWO:120,FIVE:300,TEN:600};o[o.TWO]="TWO",o[o.FIVE]="FIVE",o[o.TEN]="TEN";var s=(u.prototype.startWatching=function(){var e=this;this.activityEvents$=n.merge(n.fromEvent(window,"mousemove"),n.fromEvent(window,"resize"),n.fromEvent(document,"keydown")),this.idle$=n.from(this.activityEvents$),this.idleSubscription&&this.idleSubscription.unsubscribe(),this.idleSubscription=this.idle$.pipe(r.bufferTime(500),r.filter(function(t){return!t.length&&!e.isIdleDetected&&!e.isInactivityTimer}),r.tap(function(){return e.isIdleDetected=!0}),r.switchMap(function(){return e._ngZone.runOutsideAngular(function(){return n.interval(1e3).pipe(r.takeUntil(n.merge(e.activityEvents$,n.timer(1e3*e.idle).pipe(r.tap(function(){e.isInactivityTimer=!0,e.timerStart$.next(!0)})))),r.finalize(function(){return e.isIdleDetected=!1}))})})).subscribe(),this.setupTimer(this.timeout),this.setPing(this.ping)},u.prototype.stopWatching=function(){this.stopTimer(),this.idleSubscription&&this.idleSubscription.unsubscribe()},u.prototype.stopTimer=function(){this.isInactivityTimer=!1,this.timerStart$.next(!1)},u.prototype.resetTimer=function(){this.stopTimer(),this.isTimeout=!1},u.prototype.onTimerStart=function(){var e=this;return this.timerStart$.pipe(r.distinctUntilChanged(),r.switchMap(function(t){return t?e.timer$:n.of(null)}))},u.prototype.onTimeout=function(){var t=this;return this.timeout$.pipe(r.filter(function(t){return!!t}),r.tap(function(){return t.isTimeout=!0}),r.map(function(){return!0}))},u.prototype.getConfigValue=function(){return{idle:this.idle,timeout:this.timeout,ping:this.ping}},u.prototype.setConfigValues=function(t){!this.idleSubscription||this.idleSubscription.closed?(t.idle&&(this.idle=t.idle),t.ping&&(this.ping=t.ping),t.timeout&&(this.timeout=t.timeout)):console.error("Call stopWatching() before set config values")},u.prototype.setCustomActivityEvents=function(t){!this.idleSubscription||this.idleSubscription.closed?this.activityEvents$=t:console.error("Call stopWatching() before set custom activity events")},u.prototype.setupTimer=function(e){var i=this;this._ngZone.runOutsideAngular(function(){i.timer$=n.interval(1e3).pipe(r.take(e),r.map(function(){return 1}),r.scan(function(t,e){return t+e}),r.tap(function(t){t===e&&i.timeout$.next(!0)}))})},u.prototype.setPing=function(t){var e=this;this.ping$=n.interval(1e3*t).pipe(r.filter(function(){return!e.isTimeout}))},u.prototype.getPing=function(){return this.ping$},u.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],u.ctorParameters=function(){return[{type:i,decorators:[{type:e.Optional}]},{type:e.NgZone}]},u.ngInjectableDef=e.defineInjectable({factory:function(){return new u(e.inject(i,8),e.inject(e.NgZone))},token:u,providedIn:"root"}),u);function u(t,e){this._ngZone=e,this.timerStart$=new n.Subject,this.timeout$=new n.Subject,this.idle=o.TEN,this.timeout=o.FIVE,this.ping=o.TWO,t&&(this.idle=t.idle,this.timeout=t.timeout,this.ping=t.ping)}var p=(c.forRoot=function(t){return{ngModule:c,providers:[{provide:i,useValue:t}]}},c.decorators=[{type:e.NgModule,args:[{declarations:[],imports:[],exports:[]}]}],c);function c(){}t.RxIdleConfig=i,t.RxIdleService=s,t.RxIdleModule=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=rx-idle.umd.min.js.map